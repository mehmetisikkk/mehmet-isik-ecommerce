{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Lenovo/Desktop/Angular_E-commerce/Angular_E-commerce/appEcommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { GenreService } from 'src/app/Components/genre/Services/genre.service';\nimport { AlertifyService } from 'src/app/Services/alertify/alertify.service';\nimport { BooksService } from '../../Services/books.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Components/genre/Services/genre.service\";\nimport * as i2 from \"../../Services/books.service\";\nimport * as i3 from \"src/app/Services/alertify/alertify.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common/http\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\n\nfunction BookcreateComponent_div_9_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" Required places \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookcreateComponent_div_9_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" Minimum 5 characters write \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookcreateComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtemplate(1, BookcreateComponent_div_9_p_1_Template, 2, 0, \"p\", 28);\n    i0.ɵɵtemplate(2, BookcreateComponent_div_9_p_2_Template, 2, 0, \"p\", 28);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r0.movieform.get(\"title_\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.movieform.get(\"title_\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n  }\n}\n\nfunction BookcreateComponent_option_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r5.genrename, \"\");\n  }\n}\n\nfunction BookcreateComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function BookcreateComponent_div_43_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.file = undefined);\n    });\n    i0.ɵɵtext(2, \" clear file \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let BookcreateComponent = /*#__PURE__*/(() => {\n  class BookcreateComponent {\n    constructor(genreService, bookservice, alertifyService, router, http) {\n      this.genreService = genreService;\n      this.bookservice = bookservice;\n      this.alertifyService = alertifyService;\n      this.router = router;\n      this.http = http;\n      this.genres = [];\n      this.model = {\n        genreId: -1\n      };\n      this.movieform = new FormGroup({\n        title_: new FormControl(\"Book title\", [Validators.required, Validators.minLength(1)]),\n        description_: new FormControl(\"Book description\", [Validators.required]),\n        productcode_: new FormControl(\"0000\", [Validators.required]),\n        isSoftCover_: new FormControl(\"true\", [Validators.required]),\n        page_: new FormControl(\"0000\", [Validators.required]),\n        isPopular_: new FormControl(\"true\", [Validators.required]),\n        imageUrl_: new FormControl(\"../../../../../assets/logo.png\", [Validators.required]),\n        genreId_: new FormControl(\"-1\", [Validators.required]),\n        subimageUrl_: new FormControl(\"\", [Validators.required])\n      });\n    }\n\n    getfile(event) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.file = event.target.files[0];\n      })();\n    }\n\n    ngOnInit() {\n      this.genreService.getGenres().subscribe(data => {\n        this.genres = data;\n      });\n    }\n\n    isFormValid() {\n      return this.movieform.disabled ? true : this.movieform.valid;\n    }\n\n    createBook() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        let formData = new FormData();\n        formData.set('file', _this2.file);\n        formData.append(\"file\", _this2.file);\n        formData.append(\"upload_preset\", \"angular-ecommerce\");\n\n        _this2.bookservice.uploadSignature(formData).subscribe(imageData => {\n          _this2.urlimage = imageData.url;\n          console.log(_this2.urlimage);\n          const movie = {\n            title: _this2.movieform.value.title_,\n            description: _this2.movieform.value.description_,\n            productcode: _this2.movieform.value.productcode_,\n            isSoftCover: _this2.movieform.value.isSoftCover_,\n            page: _this2.movieform.value.page_,\n            isPopular: _this2.movieform.value.isPopular_,\n            datePublished: new Date().toISOString().replace(\"T\", \" \").replace(\"Z\", \" \"),\n            imageUrl: _this2.movieform.value.imageUrl_,\n            genreId: _this2.movieform.value.genreId_,\n            subimageUrl: _this2.urlimage\n          };\n\n          if (_this2.movieform.value.title_ != \"\" && _this2.movieform.value.description_ != \"\" && _this2.movieform.value.imageUrl_ != \"\" && _this2.movieform.value.genreId_ != \"\") {\n            _this2.bookservice.postBook(movie).subscribe(data => {\n              console.log(data);\n\n              _this2.router.navigate(['/books']);\n            });\n\n            _this2.alertifyService.success(movie.title);\n          } else {\n            _this2.alertifyService.error(\"Select genre\");\n          }\n        });\n      })();\n    }\n\n    ClearForm() {\n      this.movieform.patchValue({\n        title_: '',\n        description_: '',\n        imageUrl_: '',\n        genreId_: '-1'\n      });\n    }\n\n  }\n\n  BookcreateComponent.ɵfac = function BookcreateComponent_Factory(t) {\n    return new (t || BookcreateComponent)(i0.ɵɵdirectiveInject(i1.GenreService), i0.ɵɵdirectiveInject(i2.BooksService), i0.ɵɵdirectiveInject(i3.AlertifyService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.HttpClient));\n  };\n\n  BookcreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookcreateComponent,\n    selectors: [[\"app-bookcreate\"]],\n    features: [i0.ɵɵProvidersFeature([GenreService, BooksService, AlertifyService])],\n    decls: 48,\n    vars: 6,\n    consts: [[2, \"color\", \"red\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [\"for\", \"title\", 1, \"form-label\"], [\"id\", \"title\", \"name\", \"title\", \"type\", \"text\", \"formControlName\", \"title_\", 1, \"form-control\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"for\", \"description\", 1, \"form-label\"], [\"id\", \"description\", \"name\", \"description\", \"type\", \"text\", \"formControlName\", \"description_\", 1, \"form-control\"], [\"for\", \"productcode\", 1, \"form-label\"], [\"id\", \"productcode\", \"name\", \"productcode\", \"type\", \"text\", \"formControlName\", \"productcode_\", 1, \"form-control\"], [\"id\", \"isSoftCover\", \"name\", \"isSoftCover\", \"type\", \"checkbox\", \"formControlName\", \"isSoftCover_\", 1, \"form-check-input\"], [\"for\", \"isSoftCover\", 1, \"form-label\"], [\"for\", \"page\", 1, \"form-label\"], [\"id\", \"page\", \"name\", \"page\", \"type\", \"number\", \"formControlName\", \"page_\", 1, \"form-control\"], [\"id\", \"isPopular\", \"name\", \"isPopular\", \"type\", \"checkbox\", \"formControlName\", \"isPopular_\", 1, \"form-check-input\"], [\"for\", \"isPopular\", 1, \"form-label\"], [\"for\", \"imageUrl\", 1, \"form-label\"], [\"id\", \"imageUrl\", \"name\", \"imageUrl\", \"type\", \"text\", \"formControlName\", \"imageUrl_\", 1, \"form-control\"], [\"for\", \"genreId\", 1, \"form-label\"], [\"id\", \"genreId\", \"name\", \"genreId\", \"formControlName\", \"genreId_\", 1, \"form-select\"], [\"value\", \"-1\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"file-container\", 1, \"mb-3\"], [\"id\", \"subimageUrl\", \"name\", \"subimageUrl\", \"type\", \"file\", \"formControlName\", \"subimageUrl_\", 1, \"form-control\", 3, \"change\"], [\"class\", \"mb-3\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [\"type\", \"submit\", 1, \"btn\", \"btn-warning\", 3, \"click\"], [1, \"alert\", \"alert-danger\"], [4, \"ngIf\"], [3, \"value\"], [3, \"click\"]],\n    template: function BookcreateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\", 0);\n        i0.ɵɵtext(1, \"Create Book\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function BookcreateComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.createBook();\n        });\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"label\", 3);\n        i0.ɵɵtext(5, \"Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"input\", 4);\n        i0.ɵɵelementStart(7, \"p\");\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, BookcreateComponent_div_9_Template, 3, 2, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 2)(11, \"label\", 6);\n        i0.ɵɵtext(12, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"input\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 2)(15, \"label\", 8);\n        i0.ɵɵtext(16, \"Productcode\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"input\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 2);\n        i0.ɵɵelement(19, \"input\", 10);\n        i0.ɵɵelementStart(20, \"label\", 11);\n        i0.ɵɵtext(21, \"isSoftCover\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 2)(23, \"label\", 12);\n        i0.ɵɵtext(24, \"Page\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"input\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 2);\n        i0.ɵɵelement(27, \"input\", 14);\n        i0.ɵɵelementStart(28, \"label\", 15);\n        i0.ɵɵtext(29, \"isPopular\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(30, \"div\", 2)(31, \"label\", 16);\n        i0.ɵɵtext(32, \"Image Url\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"input\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"div\", 2)(35, \"label\", 18);\n        i0.ɵɵtext(36, \"Category\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"select\", 19)(38, \"option\", 20);\n        i0.ɵɵtext(39, \" Select genre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(40, BookcreateComponent_option_40_Template, 2, 2, \"option\", 21);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(41, \"div\", 22)(42, \"input\", 23);\n        i0.ɵɵlistener(\"change\", function BookcreateComponent_Template_input_change_42_listener($event) {\n          return ctx.getfile($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(43, BookcreateComponent_div_43_Template, 4, 0, \"div\", 24);\n        i0.ɵɵelementStart(44, \"button\", 25);\n        i0.ɵɵtext(45, \" Create Movie \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"button\", 26);\n        i0.ɵɵlistener(\"click\", function BookcreateComponent_Template_button_click_46_listener() {\n          return ctx.ClearForm();\n        });\n        i0.ɵɵtext(47, \" Clear \");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.movieform);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.movieform.value.title_);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.movieform.get(\"title_\").invalid && ctx.movieform.get(\"title_\").touched);\n        i0.ɵɵadvance(31);\n        i0.ɵɵproperty(\"ngForOf\", ctx.genres);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.file);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !ctx.isFormValid());\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.CheckboxControlValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.FormGroupDirective, i7.FormControlName],\n    styles: [\".form-control.ng-untouched[_ngcontent-%COMP%]{border-top:5px solid orange}.form-control.ng-touched.ng-invalid[_ngcontent-%COMP%]{border-top:0;border-left:5px solid red}.form-control.ng-dirty.ng-valid[_ngcontent-%COMP%]{border-top:0;border-left:5px solid darkgreen}.form-select.ng-untouched[_ngcontent-%COMP%]{border-top:5px solid orange}.form-select.ng-touched.ng-invalid[_ngcontent-%COMP%]{border-top:0;border-left:5px solid red}.form-select.ng-dirty.ng-valid[_ngcontent-%COMP%]{border-top:0;border-left:5px solid darkgreen}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background:#6990F2}[_ngcontent-%COMP%]::selection{color:#fff;background:#6990F2}.wrapper[_ngcontent-%COMP%]{width:430px;background:#fff;border-radius:5px;padding:30px;box-shadow:7px 7px 12px #0000000d}.wrapper[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{color:#6990f2;font-size:27px;font-weight:600;text-align:center}.wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:167px;display:flex;cursor:pointer;margin:30px 0;align-items:center;justify-content:center;flex-direction:column;border-radius:5px;border:2px dashed #6990F2}form[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:where(i, p)[_ngcontent-%COMP%]{color:#6990f2}form[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px}form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;font-size:16px}section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:10px;background:#E9F0FF;list-style:none;padding:15px 20px;border-radius:5px;display:flex;align-items:center;justify-content:space-between}section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6990f2;font-size:30px}section[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.progress-area[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;margin-left:15px}.progress-area[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:7px;justify-content:space-between}.progress-area[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:6px;width:100%;margin-bottom:4px;background:#fff;border-radius:30px}.content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:100%;width:0%;background:#6990F2;border-radius:inherit}.uploaded-area[_ngcontent-%COMP%]{max-height:232px;overflow-y:scroll}.uploaded-area.onprogress[_ngcontent-%COMP%]{max-height:150px}.uploaded-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:0px}.uploaded-area[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center}.uploaded-area[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;margin-left:15px;flex-direction:column}.uploaded-area[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{color:#404040;font-size:11px}.uploaded-area[_ngcontent-%COMP%]   i.fa-check[_ngcontent-%COMP%]{font-size:16px}.file-container[_ngcontent-%COMP%]{width:40px;border:4px dotted red}.subimageUrl[_ngcontent-%COMP%]{opacity:0;padding:5rem;width:auto;height:5rem}\"]\n  });\n  return BookcreateComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}