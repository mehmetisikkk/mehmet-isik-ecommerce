{"ast":null,"code":"import _asyncToGenerator from \"G:/Step/Ev tap\\u015F\\u0131r\\u0131qlar\\u0131/4 -c\\xFC yar\\u0131m il/Angular/Layih\\u0259/10/Angular_E-commerce/appEcommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { GenreService } from 'src/app/Components/genre/Services/genre.service';\nimport { AlertifyService } from 'src/app/Services/alertify/alertify.service';\nimport { BooksService } from '../../Services/books.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Components/genre/Services/genre.service\";\nimport * as i2 from \"../../Services/books.service\";\nimport * as i3 from \"src/app/Services/alertify/alertify.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common/http\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\n\nfunction BookcreateComponent_div_11_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" Required places \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookcreateComponent_div_11_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" Minimum 5 characters write \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookcreateComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtemplate(1, BookcreateComponent_div_11_p_1_Template, 2, 0, \"p\", 28);\n    i0.ɵɵtemplate(2, BookcreateComponent_div_11_p_2_Template, 2, 0, \"p\", 28);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r0.movieform.get(\"title_\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.movieform.get(\"title_\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n  }\n}\n\nfunction BookcreateComponent_option_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r5.genrename, \"\");\n  }\n}\n\nfunction BookcreateComponent_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function BookcreateComponent_div_45_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.file = undefined);\n    });\n    i0.ɵɵtext(2, \" clear file \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class BookcreateComponent {\n  constructor(genreService, bookservice, alertifyService, router, http) {\n    this.genreService = genreService;\n    this.bookservice = bookservice;\n    this.alertifyService = alertifyService;\n    this.router = router;\n    this.http = http;\n    this.genres = [];\n    this.model = {\n      genreId: -1\n    };\n    this.movieform = new FormGroup({\n      title_: new FormControl(\"Movie title\", [Validators.required, Validators.minLength(1)]),\n      description_: new FormControl(\"Movie description\", [Validators.required]),\n      productcode_: new FormControl(\"0000\", [Validators.required]),\n      isSoftCover_: new FormControl(\"0\", [Validators.required]),\n      page_: new FormControl(\"0000\", [Validators.required]),\n      isPopular_: new FormControl(\"0\", [Validators.required]),\n      imageUrl_: new FormControl(\"../../../../../assets/logo.png\", [Validators.required]),\n      genreId_: new FormControl(\"-1\", [Validators.required]),\n      subimageUrl_: new FormControl(\"\", [Validators.required])\n    });\n  }\n\n  getfile(event) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.file = event.target.files[0];\n    })();\n  }\n\n  ngOnInit() {\n    this.genreService.getGenre().subscribe(data => {\n      this.genres = data;\n    });\n  }\n\n  isFormValid() {\n    return this.movieform.disabled ? true : this.movieform.valid;\n  }\n\n  createBook() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let formData = new FormData();\n      formData.set('file', _this2.file);\n      formData.append(\"file\", _this2.file);\n      formData.append(\"upload_preset\", \"angular-ecommerce\");\n\n      _this2.bookservice.uploadSignature(formData).subscribe(imageData => {\n        _this2.urlimage = imageData.url;\n        console.log(_this2.urlimage);\n        const movie = {\n          title: _this2.movieform.value.title_,\n          description: _this2.movieform.value.description_,\n          productcode: _this2.movieform.value.productcode_,\n          isSoftCover: _this2.movieform.value.isSoftCover_,\n          page: _this2.movieform.value.page_,\n          isPopular: _this2.movieform.value.isPopular_,\n          datePublished: new Date().getTime(),\n          imageUrl: _this2.movieform.value.imageUrl_,\n          genreId: _this2.movieform.value.genreId_,\n          subimageUrl: _this2.urlimage\n        };\n\n        if (_this2.movieform.value.title_ != \"\" && _this2.movieform.value.description_ != \"\" && _this2.movieform.value.imageUrl_ != \"\" && _this2.movieform.value.genreId_ != \"\") {\n          _this2.bookservice.postBook(movie).subscribe(data => {\n            console.log(data);\n\n            _this2.router.navigate(['/books']);\n          });\n\n          _this2.alertifyService.success(movie.title);\n        }\n      });\n    })();\n  }\n\n  ClearForm() {\n    this.movieform.patchValue({\n      title_: '',\n      description_: '',\n      imageUrl_: '',\n      genreId_: '-1'\n    });\n  }\n\n}\n\nBookcreateComponent.ɵfac = function BookcreateComponent_Factory(t) {\n  return new (t || BookcreateComponent)(i0.ɵɵdirectiveInject(i1.GenreService), i0.ɵɵdirectiveInject(i2.BooksService), i0.ɵɵdirectiveInject(i3.AlertifyService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.HttpClient));\n};\n\nBookcreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BookcreateComponent,\n  selectors: [[\"app-bookcreate\"]],\n  features: [i0.ɵɵProvidersFeature([GenreService, BooksService, AlertifyService])],\n  decls: 50,\n  vars: 6,\n  consts: [[2, \"color\", \"red\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [\"for\", \"title\", 1, \"form-label\"], [\"id\", \"title\", \"name\", \"title\", \"type\", \"text\", \"formControlName\", \"title_\", 1, \"form-control\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"for\", \"description\", 1, \"form-label\"], [\"id\", \"description\", \"name\", \"description\", \"type\", \"text\", \"formControlName\", \"description_\", 1, \"form-control\"], [\"for\", \"productcode\", 1, \"form-label\"], [\"id\", \"productcode\", \"name\", \"productcode\", \"type\", \"text\", \"formControlName\", \"productcode_\", 1, \"form-control\"], [\"for\", \"isSoftCover\", 1, \"form-label\"], [\"id\", \"isSoftCover\", \"name\", \"isSoftCover\", \"type\", \"checkbox\", \"formControlName\", \"isSoftCover_\", 1, \"form-control\"], [\"for\", \"page\", 1, \"form-label\"], [\"id\", \"page\", \"name\", \"page\", \"type\", \"number\", \"formControlName\", \"page_\", 1, \"form-control\"], [\"for\", \"isPopular\", 1, \"form-label\"], [\"id\", \"isPopular\", \"name\", \"isPopular\", \"type\", \"checkbox\", \"formControlName\", \"isPopular_\", 1, \"form-control\"], [\"for\", \"imageUrl\", 1, \"form-label\"], [\"id\", \"imageUrl\", \"name\", \"imageUrl\", \"type\", \"text\", \"formControlName\", \"imageUrl_\", 1, \"form-control\"], [\"for\", \"genreId\", 1, \"form-label\"], [\"id\", \"genreId\", \"name\", \"genreId\", \"formControlName\", \"genreId_\", 1, \"form-select\"], [\"value\", \"-1\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"file-container\", 1, \"mb-3\"], [\"id\", \"subimageUrl\", \"name\", \"subimageUrl\", \"type\", \"file\", \"formControlName\", \"subimageUrl_\", 1, \"form-control\", 3, \"change\"], [\"class\", \"mb-3\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [\"type\", \"submit\", 1, \"btn\", \"btn-warning\", 3, \"click\"], [1, \"alert\", \"alert-danger\"], [4, \"ngIf\"], [3, \"value\"], [3, \"click\"]],\n  template: function BookcreateComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"Create Movie\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"h1\", 0);\n      i0.ɵɵtext(3, \"Reactive form\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"form\", 1);\n      i0.ɵɵlistener(\"ngSubmit\", function BookcreateComponent_Template_form_ngSubmit_4_listener() {\n        return ctx.createBook();\n      });\n      i0.ɵɵelementStart(5, \"div\", 2)(6, \"label\", 3);\n      i0.ɵɵtext(7, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 4);\n      i0.ɵɵelementStart(9, \"p\");\n      i0.ɵɵtext(10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(11, BookcreateComponent_div_11_Template, 3, 2, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 2)(13, \"label\", 6);\n      i0.ɵɵtext(14, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 2)(17, \"label\", 8);\n      i0.ɵɵtext(18, \"Productcode\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 2)(21, \"label\", 10);\n      i0.ɵɵtext(22, \"isSoftCover\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"div\", 2)(25, \"label\", 12);\n      i0.ɵɵtext(26, \"Page\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"input\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 2)(29, \"label\", 14);\n      i0.ɵɵtext(30, \"isPopular\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(31, \"input\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"div\", 2)(33, \"label\", 16);\n      i0.ɵɵtext(34, \"Image Url\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(35, \"input\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"div\", 2)(37, \"label\", 18);\n      i0.ɵɵtext(38, \"Category\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"select\", 19)(40, \"option\", 20);\n      i0.ɵɵtext(41, \" Select genre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(42, BookcreateComponent_option_42_Template, 2, 2, \"option\", 21);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(43, \"div\", 22)(44, \"input\", 23);\n      i0.ɵɵlistener(\"change\", function BookcreateComponent_Template_input_change_44_listener($event) {\n        return ctx.getfile($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(45, BookcreateComponent_div_45_Template, 4, 0, \"div\", 24);\n      i0.ɵɵelementStart(46, \"button\", 25);\n      i0.ɵɵtext(47, \" Create Movie \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"button\", 26);\n      i0.ɵɵlistener(\"click\", function BookcreateComponent_Template_button_click_48_listener() {\n        return ctx.ClearForm();\n      });\n      i0.ɵɵtext(49, \" Clear \");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.movieform);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.movieform.value.title_);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.movieform.get(\"title_\").invalid && ctx.movieform.get(\"title_\").touched);\n      i0.ɵɵadvance(31);\n      i0.ɵɵproperty(\"ngForOf\", ctx.genres);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.file);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.isFormValid());\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.CheckboxControlValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.FormGroupDirective, i7.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJib29rY3JlYXRlLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","GenreService","AlertifyService","BooksService","i0","undefined","BookcreateComponent","constructor","genreService","bookservice","alertifyService","router","http","genreId","title_","required","minLength","description_","productcode_","isSoftCover_","page_","isPopular_","imageUrl_","genreId_","subimageUrl_","getfile","event","file","target","files","ngOnInit","getGenre","subscribe","data","genres","isFormValid","movieform","disabled","valid","createBook","formData","FormData","set","append","uploadSignature","imageData","urlimage","url","console","log","movie","title","value","description","productcode","isSoftCover","page","isPopular","datePublished","Date","getTime","imageUrl","subimageUrl","postBook","navigate","success","ClearForm","patchValue","selectors","features","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["G:\\Step\\Ev tapşırıqları\\4 -cü yarım il\\Angular\\Layihə\\10\\Angular_E-commerce\\appEcommerce\\src\\app\\Components\\books\\Components\\bookcreate\\bookcreate.component.ts","G:\\Step\\Ev tapşırıqları\\4 -cü yarım il\\Angular\\Layihə\\10\\Angular_E-commerce\\appEcommerce\\src\\app\\Components\\books\\Components\\bookcreate\\bookcreate.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Genre } from 'src/app/Components/genre/Models/genre';\nimport { GenreService } from 'src/app/Components/genre/Services/genre.service';\nimport { AlertifyService } from 'src/app/Services/alertify/alertify.service';\nimport { BooksService } from '../../Services/books.service';\n\n@Component({\n  selector: 'app-bookcreate',\n  templateUrl: './bookcreate.component.html',\n  styleUrls: ['./bookcreate.component.css'],\n  providers: [GenreService, BooksService, AlertifyService]\n})\nexport class BookcreateComponent implements OnInit {\n\n  genres: Genre[] = [];\n\n  model:any={genreId:-1};\n\n  file:any;\n\n  urlimage:any;\n\n  async getfile(event:any) {\n\n    this.file=event.target.files[0];\n\n  }\n\n  constructor(private genreService: GenreService, private bookservice: BooksService, private alertifyService: AlertifyService, private router: Router, private http:HttpClient) { }\n\n  ngOnInit(): void {\n\n    this.genreService.getGenre().subscribe(data => { this.genres = data });\n\n  }\n\n  movieform = new FormGroup({\n\n    title_: new FormControl(\"Movie title\",[Validators.required, Validators.minLength(1)]),\n    description_: new FormControl(\"Movie description\",[Validators.required]),\n    productcode_: new FormControl(\"0000\",[Validators.required]),\n    isSoftCover_: new FormControl(\"0\",[Validators.required]),\n    page_: new FormControl(\"0000\",[Validators.required]),\n    isPopular_: new FormControl(\"0\",[Validators.required]),\n    imageUrl_: new FormControl(\"../../../../../assets/logo.png\",[Validators.required]),\n    genreId_: new FormControl(\"-1\",[Validators.required]),\n    subimageUrl_: new FormControl(\"\",[Validators.required])\n\n  });\n\n\n  isFormValid() : boolean {\n    return this.movieform.disabled ? true : this.movieform.valid\n  }\n\n\n  async createBook(){\n\n\n    let formData=new FormData();\n\n    formData.set('file', this.file);\n\n    formData.append(\"file\", this.file);\n\n    formData.append(\"upload_preset\", \"angular-ecommerce\");\n\n   this.bookservice.uploadSignature(formData).subscribe((imageData) => {\n    this.urlimage = imageData.url;\n\n    console.log(this.urlimage);\n\n\n    const movie = {\n      title: this.movieform.value.title_,\n      description: this.movieform.value.description_,\n      productcode: this.movieform.value.productcode_,\n      isSoftCover: this.movieform.value.isSoftCover_,\n      page: this.movieform.value.page_,\n      isPopular: this.movieform.value.isPopular_,\n      datePublished: new Date().getTime(),\n      imageUrl: this.movieform.value.imageUrl_,\n      genreId: this.movieform.value.genreId_,\n      subimageUrl: this.urlimage,\n    }\n\n\n\n\n\n    if(this.movieform.value.title_!=\"\" && this.movieform.value.description_!=\"\"  && this.movieform.value.imageUrl_!=\"\"  && this.movieform.value.genreId_!=\"\")\n    {\n\n\n\n\n      this.bookservice.postBook(movie).subscribe(data => {console.log(data); this.router.navigate(['/books'])});\n\n      this.alertifyService.success(movie.title);\n\n    }\n  })\n\n\n\n\n\n  }\n\n  ClearForm(){\n\n    this.movieform.patchValue({\n\n      title_: '',\n      description_: '',\n      imageUrl_: '',\n      genreId_:'-1',\n\n    });\n\n  }\n}\n\n\n","<p>Create Movie</p>\n\n\n<h1 style=\"color:red\">Reactive form</h1>\n\n<form [formGroup]=\"movieform\" (ngSubmit)=\"createBook()\">\n\n  <div class=\"mb-3\">\n    <label for=\"title\" class=\"form-label\">Title</label>\n    <input id=\"title\" name=\"title\" type=\"text\" class=\"form-control\"  formControlName=\"title_\">\n    <p>{{movieform.value.title_}}</p>\n\n    <div class=\"alert alert-danger\" *ngIf=\"movieform.get('title_').invalid && movieform.get('title_').touched\">\n      <p *ngIf=\"movieform.get('title_')?.errors?.['required']\"> Required places </p>\n      <p *ngIf=\"movieform.get('title_')?.errors?.['minlength']\"> Minimum  5 characters write </p>\n    </div>\n\n  </div>\n\n  <div class=\"mb-3\">\n    <label for=\"description\" class=\"form-label\">Description</label>\n    <input  id=\"description\" name=\"description\" type=\"text\" class=\"form-control\"  formControlName=\"description_\">\n  </div>\n\n  <div class=\"mb-3\">\n    <label for=\"productcode\" class=\"form-label\">Productcode</label>\n    <input  id=\"productcode\" name=\"productcode\" type=\"text\" class=\"form-control\"  formControlName=\"productcode_\">\n  </div>\n\n  <div class=\"mb-3\">\n    <label for=\"isSoftCover\" class=\"form-label\">isSoftCover</label>\n    <input  id=\"isSoftCover\" name=\"isSoftCover\" type=\"checkbox\" class=\"form-control\"  formControlName=\"isSoftCover_\">\n  </div>\n\n  <div class=\"mb-3\">\n    <label for=\"page\" class=\"form-label\">Page</label>\n    <input  id=\"page\" name=\"page\" type=\"number\" class=\"form-control\"  formControlName=\"page_\">\n  </div>\n\n  <div class=\"mb-3\">\n    <label for=\"isPopular\" class=\"form-label\">isPopular</label>\n    <input  id=\"isPopular\" name=\"isPopular\" type=\"checkbox\" class=\"form-control\"  formControlName=\"isPopular_\">\n  </div>\n\n  <div class=\"mb-3\">\n    <label for=\"imageUrl\" class=\"form-label\">Image Url</label>\n    <input id=\"imageUrl\" name=\"imageUrl\" type=\"text\" class=\"form-control\"  formControlName=\"imageUrl_\">\n  </div>\n\n\n\n  <div class=\"mb-3\">\n    <label for=\"genreId\" class=\"form-label\">Category</label>\n    <select id=\"genreId\" name=\"genreId\" class=\"form-select\"  formControlName=\"genreId_\">\n      <option value=\"-1\"> Select genre</option>\n      <option *ngFor=\"let item of genres\" [value]=\"item.id\"> {{item.genrename}}</option>\n    </select>\n  </div>\n\n  <div class=\"mb-3\" id=\"file-container\">\n\n    <input id=\"subimageUrl\" name=\"subimageUrl\" type=\"file\" class=\"form-control\"  formControlName=\"subimageUrl_\"(change)=\"getfile($event)\">\n\n  </div>\n\n  <div class=\"mb-3\" *ngIf=\"file\">\n\n\n\n   <button (click)=\"file=undefined\"> clear file </button>\n\n   <br>\n\n  </div>\n\n  <button [disabled]=\"!isFormValid()\" type=\"submit\" class=\"btn btn-success\">\n\n     Create Movie\n\n  </button>\n\n  <button type=\"submit\" (click)=\"ClearForm()\" class=\"btn btn-warning\">\n\n    Clear\n\n </button>\n\n</form>\n"]},"metadata":{},"sourceType":"module"}